<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dashboard Bexio ‚Üí Power BI</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/style.css') }}">
</head>
<body>
    <div class="container">
        <!-- Header -->
        <header class="header">
            <div class="logo">
                <h1>üìä Dashboard Bexio ‚Üí Power BI</h1>
                <p class="subtitle">Synchronisez vos donn√©es Bexio vers Power BI en un clic</p>
            </div>
            <div class="status-indicator" id="statusIndicator">
                <span class="status-dot" id="statusDot"></span>
                <span class="status-text" id="statusText">Non configur√©</span>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Configuration Card -->
            <div class="card" id="configCard">
                <div class="card-header">
                    <h2>‚öôÔ∏è Configuration</h2>
                </div>
                <div class="card-body">
                    <div class="form-group">
                        <label for="apiKey">Cl√© API Bexio</label>
                        <input
                            type="password"
                            id="apiKey"
                            class="input-field"
                            placeholder="Entrez votre cl√© API Bexio..."
                        >
                        <small class="help-text">
                            Obtenez votre cl√© API sur
                            <a href="https://office.bexio.com/index.php/settings/api" target="_blank">
                                Bexio ‚Üí Param√®tres ‚Üí API
                            </a>
                        </small>
                    </div>
                    <button class="btn btn-primary" id="saveConfigBtn" onclick="saveConfig()">
                        üíæ Enregistrer la configuration
                    </button>
                </div>
            </div>

            <!-- Sync Card -->
            <div class="card" id="syncCard" style="display: none;">
                <div class="card-header">
                    <h2>üîÑ Synchronisation</h2>
                </div>
                <div class="card-body">
                    <!-- Progress Bar -->
                    <div class="progress-container" id="progressContainer" style="display: none;">
                        <div class="progress-bar">
                            <div class="progress-bar-fill" id="progressBarFill"></div>
                        </div>
                        <p class="progress-text" id="progressText">0%</p>
                        <p class="progress-message" id="progressMessage">Initialisation...</p>
                    </div>

                    <!-- Stats -->
                    <div class="stats-grid" id="statsGrid">
                        <div class="stat-card">
                            <div class="stat-icon">üë•</div>
                            <div class="stat-value" id="statContacts">0</div>
                            <div class="stat-label">Contacts</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üìÑ</div>
                            <div class="stat-value" id="statInvoices">0</div>
                            <div class="stat-label">Factures</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üìÅ</div>
                            <div class="stat-value" id="statProjects">0</div>
                            <div class="stat-label">Projets</div>
                        </div>
                        <div class="stat-card">
                            <div class="stat-icon">üí∞</div>
                            <div class="stat-value" id="statRevenue">CHF 0</div>
                            <div class="stat-label">Chiffre d'affaires</div>
                        </div>
                    </div>

                    <!-- Last Sync Info -->
                    <div class="info-box" id="lastSyncInfo" style="display: none;">
                        <p>Derni√®re synchronisation : <strong id="lastSyncTime">Jamais</strong></p>
                    </div>

                    <!-- Action Buttons -->
                    <div class="button-group">
                        <button class="btn btn-primary btn-large" id="syncBtn" onclick="startSync()">
                            üîÑ Synchroniser les donn√©es
                        </button>
                        <button class="btn btn-secondary" id="downloadBtn" onclick="downloadFile()" style="display: none;">
                            üì• T√©l√©charger le fichier Power BI
                        </button>
                    </div>
                </div>
            </div>

            <!-- Success Message -->
            <div class="alert alert-success" id="successAlert" style="display: none;">
                <strong>‚úÖ Succ√®s !</strong>
                <p id="successMessage"></p>
            </div>

            <!-- Error Message -->
            <div class="alert alert-error" id="errorAlert" style="display: none;">
                <strong>‚ùå Erreur</strong>
                <p id="errorMessage"></p>
            </div>
        </main>

        <!-- Footer -->
        <footer class="footer">
            <p>¬© 2024 BSCO Solutions | Dashboard Bexio ‚Üí Power BI v1.0</p>
            <p>
                <a href="https://github.com/csigno1204/BSCO-Dashboard-PowerBI" target="_blank">
                    GitHub
                </a> |
                <a href="#" onclick="showAbout()">√Ä propos</a>
            </p>
        </footer>
    </div>

    <script src="{{ url_for('static', filename='js/app.js') }}"></script>
</body>
</html>
